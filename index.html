<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ALEX V12.2 - CPANEL ADMIN</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');
        * { -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; outline: none !important; }
        body { background: #000; color: #fff; font-family: 'Orbitron', sans-serif; min-height: 100vh; overflow: hidden; display: flex; align-items: center; justify-content: center; }
        #laser-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
        .neon-box { background: rgba(0, 0, 0, 0.93); border: 1px solid rgba(255, 255, 255, 0.1); backdrop-filter: blur(20px); border-radius: 2rem; box-shadow: 0 0 50px rgba(0,0,0,1); }
        .input-cyber { background: rgba(20,20,20,0.9) !important; border: 1px solid #333 !important; color: #fff !important; }
        .btn-rgb { background: linear-gradient(90deg, #ff0055, #7000ff, #00f2ff); background-size: 200% auto; animation: shine 3s linear infinite; color: #fff; font-weight: 900; text-transform: uppercase; }
        @keyframes shine { to { background-position: 200% center; } }
        .hidden { display: none !important; }
        .tai-text { color: #00f2ff; text-shadow: 0 0 20px #00f2ff; font-size: 4rem; font-weight: 900; }
        .xiu-text { color: #ff0055; text-shadow: 0 0 20px #ff0055; font-size: 4rem; font-weight: 900; }
        .admin-table { font-family: sans-serif; font-size: 10px; width: 100%; color: #ccc; }
        .admin-table th { color: #555; text-align: left; padding: 5px; border-bottom: 1px solid #222; }
        .admin-table td { padding: 5px; border-bottom: 1px solid #111; }
    </style>
</head>
<body oncontextmenu="return false;">

    <canvas id="laser-canvas"></canvas>

    <div id="app" class="w-full max-w-[420px] p-5 relative">
        
        <div id="auth-box" class="neon-box p-10 space-y-6">
            <div class="text-center">
                <h1 class="text-3xl font-black italic">ALEX <span class="text-red-600">V12.2</span></h1>
                <p class="text-[8px] tracking-[0.5em] text-slate-500 uppercase">Titan Command Center</p>
            </div>
            <div class="space-y-3">
                <input id="u" type="text" placeholder="Username" class="w-full p-4 rounded-xl input-cyber text-xs font-bold uppercase">
                <input id="p" type="password" placeholder="Password" class="w-full p-4 rounded-xl input-cyber text-xs font-bold">
            </div>
            <button onclick="auth('login')" id="l-btn" class="w-full py-4 btn-rgb rounded-xl text-xs">Login Server</button>
            <button onclick="auth('reg')" id="r-btn" class="hidden w-full py-4 btn-rgb rounded-xl text-xs">Create Member</button>
            <div class="flex justify-between px-1">
                <button onclick="toggleReg()" id="t-btn" class="text-[9px] text-slate-600 uppercase">Register</button>
                <button onclick="openAdmin()" class="text-[9px] text-red-900 font-bold uppercase">System Admin</button>
            </div>
        </div>

        <div id="dash-box" class="hidden space-y-4">
            <div class="neon-box p-6 flex justify-between items-center">
                <div>
                    <h2 id="u-name" class="font-black text-white uppercase text-sm">...</h2>
                    <p id="u-bal" class="text-xs text-green-500 font-bold">0đ</p>
                </div>
                <button onclick="showNap()" class="bg-cyan-500/20 px-4 py-2 rounded-lg text-cyan-400 text-[10px] font-bold">NẠP TIỀN</button>
            </div>
            <div class="grid grid-cols-2 gap-2">
                <div onclick="buy(25000, 1)" class="neon-box p-4 text-center cursor-pointer border-none">1 Ngày / 25k</div>
                <div onclick="buy(150000, 30)" class="neon-box p-4 text-center cursor-pointer border-none">30 Ngày / 150k</div>
            </div>
            <div class="neon-box p-6 space-y-3">
                <input id="k-in" type="text" placeholder="DÁN KEY VÀO ĐÂY" class="w-full p-4 rounded-xl input-cyber text-center text-xs">
                <button onclick="act()" class="w-full py-4 btn-rgb rounded-xl text-xs">Kích Hoạt Ngay</button>
            </div>
        </div>

        <div id="admin-box" class="hidden neon-box p-6 space-y-4 max-h-[80vh] overflow-y-auto">
            <div class="flex justify-between items-center border-b border-red-500/30 pb-2">
                <h2 class="text-red-500 font-black text-sm uppercase">Admin Cpanel</h2>
                <button onclick="location.reload()" class="text-[8px] text-slate-500">THOÁT</button>
            </div>

            <div class="bg-red-500/5 p-4 rounded-xl border border-red-500/10 space-y-2">
                <p class="text-[9px] text-red-400 font-bold uppercase">Cộng tiền User</p>
                <input id="adm-target" type="text" placeholder="Tên User" class="w-full p-2 rounded bg-black border border-zinc-800 text-[10px]">
                <input id="adm-cash" type="number" placeholder="Số tiền (VD: 100000)" class="w-full p-2 rounded bg-black border border-zinc-800 text-[10px]">
                <button onclick="adminAddMoney()" class="w-full py-2 bg-red-600 text-[10px] font-bold rounded">XÁC NHẬN CỘNG TIỀN</button>
            </div>

            <div class="space-y-2">
                <p class="text-[9px] text-slate-500 uppercase">Danh sách thành viên</p>
                <div id="user-list" class="bg-zinc-950 rounded-lg p-2">
                    </div>
            </div>
        </div>

        <div id="nap-box" class="hidden neon-box p-8 text-center space-y-4">
             <img id="q-img" src="" class="mx-auto w-40">
             <p id="b-c" class="text-xl font-bold text-red-500"></p>
             <button onclick="closeNap()" class="text-[9px] text-slate-600 underline uppercase">Quay lại</button>
        </div>
    </div>

    <script>
        const CFG = {
            BANK_ID: "VIETINBANK",
            BANK_STK: "103886058569",
            ADMIN_PASS: "nguyendu2009@",
            DB_NAME: "ALEX_DB_V12_2"
        };
        let cur = null;

        const getDB = () => JSON.parse(localStorage.getItem(CFG.DB_NAME)) || { users: [], keys: [] };
        const setDB = (db) => localStorage.setItem(CFG.DB_NAME, JSON.stringify(db));

        // NỀN LASER (Giữ cũ cho đẹp)
        const canvas = document.getElementById('laser-canvas');
        const ctx = canvas.getContext('2d');
        function init(){ canvas.width=innerWidth; canvas.height=innerHeight; }
        window.onresize=init; init();
        function draw(){ ctx.fillStyle='rgba(0,0,0,0.1)'; ctx.fillRect(0,0,canvas.width,canvas.height); requestAnimationFrame(draw); }
        draw();

        // LOGIC AUTH
        function toggleReg(){
            const isReg = document.getElementById('reg-ext').classList.toggle('hidden');
            document.getElementById('l-btn').classList.toggle('hidden');
            document.getElementById('r-btn').classList.toggle('hidden');
            document.getElementById('t-btn').innerText = isReg ? "Login" : "Register";
        }

        function auth(mode){
            const u = document.getElementById('u').value.trim().toUpperCase();
            const p = document.getElementById('p').value;
            if(!u || !p) return;
            let db = getDB();
            if(mode === 'reg'){
                if(db.users.find(x=>x.u===u)) return alert("User tồn tại!");
                db.users.push({ u, p, bal: 0, exp: null, ref: "ALEX"+Math.floor(1000+Math.random()*9000) });
                setDB(db); alert("Đăng ký xong!"); toggleReg();
            } else {
                const user = db.users.find(x=>x.u===u && x.p===p);
                if(user){ cur = user; showDash(); } else alert("Sai thông tin!");
            }
        }

        function showDash(){
            document.getElementById('auth-box').classList.add('hidden');
            document.getElementById('dash-box').classList.remove('hidden');
            document.getElementById('u-name').innerText = cur.u;
            document.getElementById('u-bal').innerText = cur.bal.toLocaleString()+"đ";
        }

        // --- CPANEL ADMIN FUNCTIONS ---
        function openAdmin(){
            const pass = prompt("NHẬP MẬT KHẨU ADMIN:");
            if(pass !== CFG.ADMIN_PASS) return alert("Sai mật khẩu!");
            
            document.getElementById('auth-box').classList.add('hidden');
            document.getElementById('dash-box').classList.add('hidden');
            document.getElementById('admin-box').classList.remove('hidden');
            renderAdminUsers();
        }

        function renderAdminUsers(){
            const db = getDB();
            let html = `<table class="admin-table"><tr><th>USER</th><th>TIỀN</th><th>MÃ NẠP</th></tr>`;
            db.users.forEach(user => {
                html += `<tr><td>${user.u}</td><td>${user.bal.toLocaleString()}đ</td><td>${user.ref}</td></tr>`;
            });
            html += `</table>`;
            document.getElementById('user-list').innerHTML = html;
        }

        function adminAddMoney(){
            const targetU = document.getElementById('adm-target').value.trim().toUpperCase();
            const amount = parseInt(document.getElementById('adm-cash').value);
            if(!targetU || isNaN(amount)) return alert("Nhập đủ thông tin!");

            let db = getDB();
            const idx = db.users.findIndex(x => x.u === targetU);
            if(idx === -1) return alert("Không tìm thấy User này!");

            db.users[idx].bal += amount;
            setDB(db);
            alert(`Đã cộng ${amount.toLocaleString()}đ cho ${targetU}`);
            renderAdminUsers(); // Cập nhật lại danh sách
        }

        // TIỆN ÍCH MUA KEY & NẠP (Rút gọn)
        function buy(p, d){
            let db = getDB(); const i = db.users.findIndex(x=>x.u===cur.u);
            if(db.users[i].bal < p) return alert("Bạn không đủ tiền!");
            db.users[i].bal -= p;
            const k = "KEY-" + Math.random().toString(36).substring(7).toUpperCase();
            db.keys.push({ key: k, days: d, used: false });
            cur = db.users[i]; setDB(db); showDash();
            prompt("KEY CỦA BẠN:", k);
        }

        function showNap(){
            document.getElementById('dash-box').classList.add('hidden');
            document.getElementById('nap-box').classList.remove('hidden');
            document.getElementById('b-c').innerText = cur.ref;
            document.getElementById('q-img').src = `https://img.vietqr.io/image/${CFG.BANK_ID}-${CFG.BANK_STK}-compact.png?addInfo=${cur.ref}`;
        }
        function closeNap(){ document.getElementById('nap-box').classList.add('hidden'); document.getElementById('dash-box').classList.remove('hidden'); }
    </script>
</body>
</html>
