<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ALEX MD5 ULTRA v18.5</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&family=JetBrains+Mono&display=swap');
        
        * { -webkit-user-select: none; user-select: none; box-sizing: border-box; }
        body { 
            background: #000; 
            color: #fff; 
            font-family: 'JetBrains Mono', monospace; 
            margin: 0; 
            height: 100vh; 
            display: flex; 
            align-items: center; 
            justify-content: center;
        }
        .glass-card { 
            background: rgba(15, 23, 42, 0.95); 
            border: 1px solid rgba(34, 211, 238, 0.3); 
            border-radius: 24px; 
            width: 100%;
            max-width: 380px;
            padding: 2rem;
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.5);
        }
        .orbitron { font-family: 'Orbitron', sans-serif; }
        .tai-neon { color: #00f2ff; text-shadow: 0 0 15px #00f2ff; }
        .xiu-neon { color: #ff0055; text-shadow: 0 0 15px #ff0055; }
        
        input, textarea { 
            background: #0a0f1e !important; 
            border: 1px solid #1e293b !important; 
            color: #22d3ee !important; 
            outline: none !important;
            user-select: text !important;
        }
        input:focus { border-color: #06b6d4 !important; }

        /* Hiệu ứng khi nhấn nút */
        .btn-active:active { transform: scale(0.96); opacity: 0.9; }
        .hidden { display: none !important; }
    </style>
</head>
<body>

    <div class="glass-card">
        <div id="login-ui" class="space-y-6">
            <div class="text-center">
                <h1 class="orbitron text-2xl font-black italic text-cyan-500">ALEX SYSTEM</h1>
                <div class="h-1 w-20 bg-cyan-500 mx-auto mt-2 rounded-full"></div>
            </div>
            
            <div class="space-y-2">
                <p class="text-[10px] orbitron text-slate-400 text-center uppercase tracking-widest">Nhập mã kích hoạt hệ thống</p>
                <input id="key-input" type="text" placeholder="KEY-XXXX-XXXX" 
                    class="w-full p-4 rounded-xl text-center font-bold text-sm tracking-widest uppercase transition-all">
            </div>

            <button onclick="validateKey()" class="w-full py-4 rounded-xl bg-cyan-600 font-bold orbitron text-sm btn-active shadow-[0_0_20px_rgba(8,145,178,0.3)]">
                KÍCH HOẠT NGAY
            </button>
            
            <div class="text-center text-[9px] text-slate-600">
                DEVICE ID: <span id="dev-id" class="text-slate-400">LOADING...</span>
            </div>
        </div>

        <div id="tool-ui" class="hidden space-y-5">
            <div class="flex justify-between items-center text-[10px] orbitron border-b border-cyan-900 pb-3">
                <span class="text-green-500 font-bold">● SYSTEM LIVE</span>
                <span id="clock" class="text-slate-500">00:00:00</span>
            </div>

            <div class="relative">
                <textarea id="md5-input" placeholder="DÁN MÃ MD5 PHIÊN..." 
                    class="w-full p-4 h-24 rounded-xl text-[11px] uppercase resize-none"></textarea>
                <button onclick="resetData()" class="absolute top-2 right-2 p-1 bg-slate-800 rounded-md text-[10px] hover:bg-red-900 transition-colors">✕</button>
            </div>
            
            <button onclick="analyzeMD5()" id="btn-ana" class="w-full py-5 rounded-xl bg-gradient-to-r from-cyan-600 to-blue-700 font-bold orbitron italic text-sm btn-active shadow-lg">
                PHÂN TÍCH DỮ LIỆU
            </button>

            <div id="result-box" class="hidden">
                <div class="bg-black/40 rounded-2xl p-6 border border-cyan-500/20 text-center">
                    <p class="text-[8px] orbitron text-slate-500 mb-1 uppercase">Dự đoán AI chính xác</p>
                    <h2 id="final-res" class="text-6xl font-black orbitron italic">...</h2>
                    <div class="mt-4 pt-3 border-t border-white/5 flex justify-between text-[10px]">
                        <span class="text-slate-500 uppercase">Confidence</span>
                        <span id="conf-val" class="text-cyan-400 font-bold">0%</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Khởi tạo Telegram WebApp
        const tg = window.Telegram.WebApp;
        tg.expand();
        
        // Hiển thị Device ID từ Telegram
        const userId = tg.initDataUnsafe.user?.id || "WEB-USER";
        document.getElementById('dev-id').innerText = userId;

        // KIỂM TRA TRẠNG THÁI ĐÃ ĐĂNG NHẬP
        window.onload = () => {
            if(localStorage.getItem('is_auth') === 'true') {
                switchToTool();
            }
        };

        // HÀM XÁC THỰC KEY (CHÍNH)
        function validateKey() {
            const keyField = document.getElementById('key-input');
            const key = keyField.value.trim().toUpperCase();

            // QUY TẮC KEY: Bạn có thể đổi logic check ở đây
            // Hiện tại mặc định Key bắt đầu bằng "KEY-" hoặc chữ "ADMIN"
            if (key === "ADMIN" || key.startsWith("KEY-") || key.length > 8) {
                localStorage.setItem('is_auth', 'true');
                tg.HapticFeedback.notificationOccurred('success');
                switchToTool();
            } else {
                tg.showAlert("Mã kích hoạt không đúng hoặc đã bị khóa!");
                tg.HapticFeedback.notificationOccurred('error');
            }
        }

        function switchToTool() {
            document.getElementById('login-ui').classList.add('hidden');
            document.getElementById('tool-ui').classList.remove('hidden');
        }

        // THUẬT TOÁN PHÂN TÍCH (CHÍNH XÁC)
        function analyzeMD5() {
            const raw = document.getElementById('md5-input').value.trim().toLowerCase();
            if (raw.length < 10) return tg.showAlert("Vui lòng dán mã MD5 hợp lệ!");

            const btn = document.getElementById('btn-ana');
            btn.innerText = "ĐANG GIẢI MÃ...";
            btn.disabled = true;

            // Thuật toán băm trọng số ASCII tĩnh (Consistent Result)
            let hashVal = 0;
            for (let i = 0; i < raw.length; i++) {
                hashVal += raw.charCodeAt(i) * (i + 1);
            }

            setTimeout(() => {
                const isTai = hashVal % 2 === 0;
                const box = document.getElementById('result-box');
                const res = document.getElementById('final-res');
                const conf = document.getElementById('conf-val');

                box.classList.remove('hidden');
                res.innerText = isTai ? "TÀI" : "XỈU";
                res.className = `text-6xl font-black orbitron italic ${isTai ? 'tai-neon' : 'xiu-neon'}`;
                
                // Độ tin cậy giả lập từ thuật toán 94-99%
                const score = 94 + (hashVal % 5.8);
                conf.innerText = score.toFixed(2) + "%";

                btn.innerText = "PHÂN TÍCH DỮ LIỆU";
                btn.disabled = false;
                tg.HapticFeedback.impactOccurred('heavy');
            }, 1000);
        }

        function resetData() {
            document.getElementById('md5-input').value = "";
            document.getElementById('result-box').classList.add('hidden');
        }

        // Đồng hồ
        setInterval(() => {
            document.getElementById('clock').innerText = new Date().toLocaleTimeString();
        }, 1000);
    </script>
</body>
</html>
