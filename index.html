<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ALEX SUPREME V12.8 - FULL VERSION</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&display=swap');
        * { -webkit-user-select: none; user-select: none; box-sizing: border-box; outline: none !important; }
        body { background: #000; color: #fff; font-family: 'Orbitron', sans-serif; height: 100vh; display: flex; align-items: center; justify-content: center; overflow: hidden; margin: 0; }
        
        #laser-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
        .cyber-card { background: rgba(0,0,0,0.85); border: 1px solid rgba(255,255,255,0.1); backdrop-filter: blur(15px); border-radius: 30px; position: relative; overflow: hidden; }
        .cyber-card::before { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: conic-gradient(from 0deg, #ff0000, #00f2ff, #7000ff, #ff0000); animation: rotate 6s linear infinite; z-index: -1; opacity: 0.2; }
        @keyframes rotate { 100% { transform: rotate(360deg); } }
        
        .inner-card { background: rgba(10,10,10,0.98); border-radius: 28px; padding: 35px; }
        .input-cyber { background: #050505 !important; border: 1px solid #222 !important; color: #00f2ff !important; text-align: center; font-size: 12px; }
        .btn-glow { background: linear-gradient(45deg, #ff0000, #00f2ff, #7000ff); background-size: 200%; transition: 0.5s; font-weight: 900; color: white; cursor: pointer; }
        .btn-glow:hover { background-position: right center; transform: scale(1.02); }
        
        .hidden { display: none !important; }
        .result-tai { color: #00f2ff; text-shadow: 0 0 30px #00f2ff; font-size: 4.5rem; font-weight: 900; }
        .result-xiu { color: #ff0055; text-shadow: 0 0 30px #ff0055; font-size: 4.5rem; font-weight: 900; }
        .bar-loading { width: 0%; height: 4px; background: #00f2ff; box-shadow: 0 0 15px #00f2ff; transition: 0.2s; }
    </style>
</head>
<body>

    <canvas id="laser-canvas"></canvas>

    <div id="app" class="w-full max-w-[420px] p-4 relative z-10">
        
        <div id="login-box" class="cyber-card">
            <div class="inner-card space-y-6">
                <div class="text-center">
                    <h1 class="text-3xl font-black italic">ALEX <span class="text-cyan-400">V12.8</span></h1>
                    <p class="text-[8px] text-slate-500 tracking-[0.4em] mt-2 italic uppercase">Hybrid Matrix System</p>
                </div>
                <div class="space-y-4">
                    <input id="u" type="text" placeholder="TÊN ĐĂNG NHẬP" class="w-full p-4 rounded-2xl input-cyber uppercase font-bold">
                    <input id="p" type="password" placeholder="MẬT KHẨU" class="w-full p-4 rounded-2xl input-cyber">
                </div>
                <button onclick="doLogin()" class="w-full py-4 btn-glow rounded-2xl text-xs uppercase shadow-lg">VÀO HỆ THỐNG</button>
                <div class="flex justify-between text-[9px] text-slate-600 font-bold uppercase px-2">
                    <button onclick="showBox('reg')">Đăng ký mới</button>
                    <button id="adm-btn" onclick="openAdmin()" class="text-red-900">Quản trị viên</button>
                </div>
            </div>
        </div>

        <div id="reg-box" class="hidden cyber-card">
            <div class="inner-card space-y-4">
                <h2 class="text-center font-black text-cyan-400">TẠO TÀI KHOẢN MỚI</h2>
                <div class="space-y-2">
                    <input id="r-u" type="text" placeholder="TÊN ĐĂNG NHẬP" class="w-full p-3 rounded-xl input-cyber uppercase font-bold">
                    <input id="r-p" type="password" placeholder="MẬT KHẨU" class="w-full p-3 rounded-xl input-cyber">
                    <input id="r-sdt" type="number" placeholder="SỐ ĐIỆN THOẠI" class="w-full p-3 rounded-xl input-cyber">
                    <input id="r-mail" type="email" placeholder="GMAIL" class="w-full p-3 rounded-xl input-cyber">
                </div>
                <button onclick="doReg()" class="w-full py-4 btn-glow rounded-xl text-xs uppercase">XÁC NHẬN ĐĂNG KÝ</button>
                <button onclick="showBox('login')" class="w-full text-[9px] text-slate-500 uppercase">Quay lại</button>
            </div>
        </div>

        <div id="dash-box" class="hidden space-y-4">
            <div class="cyber-card"><div class="inner-card p-5 flex justify-between items-center">
                <div><p id="cur-u" class="text-[10px] font-bold text-cyan-400 uppercase"></p><p id="cur-b" class="text-sm font-black text-white"></p></div>
                <button onclick="showNap()" class="bg-cyan-500 text-black px-4 py-2 rounded-xl text-[9px] font-bold">NẠP TIỀN</button>
            </div></div>
            <div class="grid grid-cols-2 gap-3">
                <div onclick="buy(25000, 1)" class="cyber-card cursor-pointer"><div class="inner-card p-4 text-center"><p class="text-[9px] font-bold">KEY 1 NGÀY</p><p class="text-cyan-400 text-xs font-black">25.000đ</p></div></div>
                <div onclick="buy(150000, 30)" class="cyber-card cursor-pointer"><div class="inner-card p-4 text-center"><p class="text-[9px] font-bold">KEY 30 NGÀY</p><p class="text-cyan-400 text-xs font-black">150.000đ</p></div></div>
            </div>
            <div class="cyber-card"><div class="inner-card space-y-4">
                <input id="key-in" type="text" placeholder="NHẬP MÃ KEY TẠI ĐÂY" class="w-full p-4 rounded-2xl input-cyber uppercase">
                <button onclick="activeKey()" class="w-full py-4 btn-glow rounded-2xl text-xs uppercase">KÍCH HOẠT LICENSE</button>
            </div></div>
        </div>

        <div id="tool-box" class="hidden cyber-card">
            <div class="inner-card p-8 space-y-6 text-center">
                <div class="flex justify-between text-[8px] text-green-500 font-bold uppercase"><span>● Sever Active</span><span id="hsd-info"></span></div>
                <textarea id="md5-val" placeholder="DÁN MÃ PHIÊN MD5..." class="w-full h-28 p-4 rounded-3xl input-cyber text-[10px] uppercase"></textarea>
                <button id="btn-ana" onclick="startAnalysis()" class="w-full py-5 btn-glow rounded-3xl text-xs uppercase shadow-xl">BẮT ĐẦU DỰ ĐOÁN</button>
                <div id="load-box" class="hidden space-y-2"><div class="w-full h-1 bg-white/5 rounded-full overflow-hidden"><div id="load-bar" class="bar-loading"></div></div></div>
                <div id="res-box" class="hidden py-4 border-t border-white/5">
                    <p id="res-text"></p>
                    <div id="res-acc" class="text-[10px] text-cyan-400 font-bold italic uppercase mt-4"></div>
                </div>
            </div>
        </div>

        <div id="nap-box" class="hidden cyber-card">
            <div class="inner-card text-center space-y-5">
                <div class="flex items-center justify-center gap-2">
                    <img id="bank-logo" src="" class="h-6">
                    <p class="text-[10px] font-bold" id="bank-name-display"></p>
                </div>
                <img id="qr" src="" class="mx-auto rounded-3xl border-2 border-white/10 w-48 shadow-2xl">
                <div class="bg-cyan-500/10 p-4 rounded-2xl border border-cyan-500/20">
                    <p class="text-[8px] text-cyan-500 font-bold uppercase mb-1">Nội dung chuyển khoản:</p>
                    <p id="ref-code" class="text-2xl font-black text-white italic tracking-widest"></p>
                </div>
                <button onclick="showBox('dash')" class="text-[9px] text-slate-500 uppercase underline">Quay lại</button>
            </div>
        </div>

        <div id="admin-box" class="hidden cyber-card"><div class="inner-card space-y-4">
            <h2 class="text-red-500 font-black text-center text-sm uppercase">Cpanel v12.8</h2>
            <input id="adm-u" type="text" placeholder="TÊN NGƯỜI DÙNG" class="w-full p-4 rounded-2xl input-cyber uppercase font-bold">
            <input id="adm-m" type="number" placeholder="SỐ TIỀN CẦN CỘNG" class="w-full p-4 rounded-2xl input-cyber">
            <button onclick="adminAdd()" class="w-full py-4 bg-red-600 rounded-2xl text-xs font-black text-white">XÁC NHẬN CỘNG TIỀN</button>
            <button onclick="location.reload()" class="w-full text-[8px] text-slate-500 uppercase">Thoát Admin</button>
        </div></div>

    </div>

    <script>
        const CONFIG = {
            ADMIN_IP: "14.191.248.22", // Thay đổi IP của bạn tại đây để mở Admin
            ADMIN_PASS: "nguyendu2009@",
            STK: "103886058569",
            BANK: "VietinBank",
            BANK_ID: "ICB",
            DB: "ALEX_DATA_V128"
        };

        let currentUser = null;
        let myIP = "";

        // --- BACKGROUND EFFECT ---
        const canvas = document.getElementById('laser-canvas');
        const ctx = canvas.getContext('2d');
        let lines = [];
        function initCanvas() {
            canvas.width = window.innerWidth; canvas.height = window.innerHeight;
            lines = [];
            for(let i=0; i<12; i++) lines.push({x: Math.random()*canvas.width, y: Math.random()*canvas.height, angle: Math.random()*Math.PI*2, speed: 1, color: `hsl(${Math.random()*360}, 100%, 50%)`});
        }
        function drawLaser() {
            ctx.fillStyle = 'rgba(0,0,0,0.1)'; ctx.fillRect(0,0,canvas.width,canvas.height);
            lines.forEach(l => {
                ctx.beginPath(); ctx.strokeStyle = l.color; ctx.lineWidth = 1.5;
                ctx.moveTo(l.x, l.y); l.x += Math.cos(l.angle)*l.speed; l.y += Math.sin(l.angle)*l.speed; ctx.lineTo(l.x, l.y); ctx.stroke();
                if(l.x<0 || l.x>canvas.width || l.y<0 || l.y>canvas.height) { l.x=Math.random()*canvas.width; l.y=Math.random()*canvas.height; }
            });
            requestAnimationFrame(drawLaser);
        }
        window.onresize = initCanvas; initCanvas(); drawLaser();

        // --- DATABASE HELPERS ---
        const getDB = () => JSON.parse(localStorage.getItem(CONFIG.DB)) || { users: [], keys: [] };
        const saveDB = (db) => localStorage.setItem(CONFIG.DB, JSON.stringify(db));

        // --- IP CHECK ---
        async function fetchIP() {
            try {
                const res = await fetch('https://api.ipify.org?format=json');
                const data = await res.json();
                myIP = data.ip;
                console.log("Your IP:", myIP);
                if(myIP !== CONFIG.ADMIN_IP) document.getElementById('adm-btn').classList.add('hidden');
            } catch(e) {}
        }
        fetchIP();

        function showBox(id) {
            ['login-box', 'dash-box', 'tool-box', 'admin-box', 'nap-box', 'reg-box'].forEach(b => document.getElementById(b).classList.add('hidden'));
            document.getElementById(id + '-box').classList.remove('hidden');
        }

        // --- LOGIC ĐĂNG KÝ ---
        function doReg() {
            const u = document.getElementById('r-u').value.trim().toUpperCase();
            const p = document.getElementById('r-p').value;
            const sdt = document.getElementById('r-sdt').value;
            const mail = document.getElementById('r-mail').value;
            if(!u || !p) return alert("Vui lòng điền đủ thông tin!");
            
            let db = getDB();
            if(db.users.find(x => x.u === u)) return alert("Tên đăng nhập đã tồn tại!");
            
            db.users.push({ u, p, sdt, mail, bal: 0, ref: "ALEX"+Math.floor(1000+Math.random()*8999), hsd: null });
            saveDB(db);
            alert("Đăng ký thành công!");
            showBox('login');
        }

        // --- LOGIC ĐĂNG NHẬP ---
        function doLogin() {
            const u = document.getElementById('u').value.trim().toUpperCase();
            const p = document.getElementById('p').value;
            let db = getDB();
            const f = db.users.find(x => x.u === u && x.p === p);
            if(f) {
                currentUser = f;
                if(currentUser.hsd && currentUser.hsd > Date.now()) showTool(); else showDash();
            } else alert("Sai tài khoản hoặc mật khẩu!");
        }

        function showDash() {
            showBox('dash');
            document.getElementById('cur-u').innerText = "User: " + currentUser.u;
            document.getElementById('cur-b').innerText = currentUser.bal.toLocaleString() + "đ";
        }

        function showTool() {
            showBox('tool');
            document.getElementById('hsd-info').innerText = "Hết hạn: " + new Date(currentUser.hsd).toLocaleDateString();
        }

        function showNap() {
            document.getElementById('ref-code').innerText = currentUser.ref;
            document.getElementById('bank-name-display').innerText = CONFIG.BANK;
            document.getElementById('bank-logo').src = `https://api.vietqr.io/img/${CONFIG.BANK_ID}.png`;
            document.getElementById('qr').src = `https://img.vietqr.io/image/${CONFIG.BANK_ID}-${CONFIG.STK}-compact.png?addInfo=${currentUser.ref}`;
            showBox('nap');
        }

        // --- MUA KEY ---
        function buy(p, d) {
            let db = getDB();
            const i = db.users.findIndex(x => x.u === currentUser.u);
            if(db.users[i].bal < p) return alert("Bạn không đủ tiền!");
            
            db.users[i].bal -= p;
            const k = "ALEX-" + Math.random().toString(36).substring(5).toUpperCase();
            db.keys.push({ key: k, days: d, used: false });
            currentUser = db.users[i]; 
            saveDB(db);
            showDash();
            prompt("COPY KEY CỦA BẠN:", k);
        }

        // --- KÍCH HOẠT KEY ---
        function activeKey() {
            const k = document.getElementById('key-in').value.trim().toUpperCase();
            let db = getDB();
            const kI = db.keys.findIndex(x => x.key === k && !x.used);
            if(kI === -1) return alert("Key không hợp lệ hoặc đã dùng!");
            
            const uI = db.users.findIndex(x => x.u === currentUser.u);
            const timeToAdd = db.keys[kI].days * 86400000;
            db.users[uI].hsd = (db.users[uI].hsd > Date.now() ? db.users[uI].hsd : Date.now()) + timeToAdd;
            db.keys[kI].used = true;
            currentUser = db.users[uI];
            saveDB(db);
            alert("Kích hoạt thành công!");
            showTool();
        }

        // --- THUẬT TOÁN PHÂN TÍCH MD5 (HYBRID) ---
        function startAnalysis() {
            const val = document.getElementById('md5-val').value.trim();
            if(val.length < 5) return alert("Vui lòng dán mã MD5 hợp lệ!");
            document.getElementById('btn-ana').disabled = true;
            document.getElementById('load-box').classList.remove('hidden');
            let p = 0;
            const iv = setInterval(() => {
                p += 5; document.getElementById('load-bar').style.width = p + "%";
                if(p >= 100) { clearInterval(iv); getResult(val); }
            }, 60);
        }

        function getResult(md5) {
            const val = md5.toLowerCase();
            let sum = 0;
            for(let i=0; i<val.length; i++) sum += val.charCodeAt(i);
            const hexWeight = (parseInt(val[0], 16) || 0) + (parseInt(val[val.length-1], 16) || 0);
            
            const isTai = Math.floor((sum * 0.6) + (hexWeight * 0.4)) % 2 === 0;
            
            const r = document.getElementById('res-text');
            const acc = document.getElementById('res-acc');
            r.innerText = isTai ? "TÀI" : "XỈU";
            r.className = isTai ? "result-tai" : "result-xiu";
            
            acc.innerHTML = `Độ chính xác: ${(94 + Math.random()*5).toFixed(2)}%<br><span class="text-[7px] text-green-500 font-bold">ALGORITHM MATRIX V12.8 ACTIVE</span>`;
            
            document.getElementById('load-box').classList.add('hidden');
            document.getElementById('res-box').classList.remove('hidden');
            document.getElementById('btn-ana').disabled = false;
        }

        // --- ADMIN PANEL CONTROL ---
        function openAdmin() {
            if(myIP !== CONFIG.ADMIN_IP) {
                alert("IP " + myIP + " KHÔNG CÓ QUYỀN ADMIN!");
                return;
            }
            if(prompt("NHẬP MẬT KHẨU ADMIN:") === CONFIG.ADMIN_PASS) showBox('admin');
        }

        function adminAdd() {
            const u = document.getElementById('adm-u').value.trim().toUpperCase();
            const m = parseInt(document.getElementById('adm-m').value);
            if(!u || isNaN(m)) return alert("Vui lòng nhập đủ thông tin!");
            
            let db = getDB();
            const i = db.users.findIndex(x => x.u === u);
            if(i !== -1) {
                db.users[i].bal += m;
                saveDB(db);
                alert("Đã cộng " + m.toLocaleString() + "đ cho tài khoản " + u);
            } else alert("Không tìm thấy người dùng: " + u);
        }
    </script>
</body>
</html>
